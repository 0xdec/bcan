EESchema Schematic File Version 2
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:stm32
LIBS:bcan
LIBS:locomotive-cache
EELAYER 25 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 5
Title "Locomotive"
Date ""
Rev ""
Comp "ECE 445"
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L +2V8 #PWR02
U 1 1 58B1F498
P 9600 5000
F 0 "#PWR02" H 9600 4850 50  0001 C CNN
F 1 "+2V8" H 9600 5140 50  0000 C CNN
F 2 "" H 9600 5000 50  0001 C CNN
F 3 "" H 9600 5000 50  0001 C CNN
	1    9600 5000
	1    0    0    -1  
$EndComp
$Comp
L VCC #PWR05
U 1 1 58B20676
P 9400 5000
F 0 "#PWR05" H 9400 4850 50  0001 C CNN
F 1 "VCC" H 9400 5150 50  0000 C CNN
F 2 "" H 9400 5000 50  0001 C CNN
F 3 "" H 9400 5000 50  0001 C CNN
	1    9400 5000
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR06
U 1 1 58B31950
P 8300 5000
F 0 "#PWR06" H 8300 4850 50  0001 C CNN
F 1 "+5V" H 8300 5140 50  0000 C CNN
F 2 "" H 8300 5000 50  0001 C CNN
F 3 "" H 8300 5000 50  0001 C CNN
	1    8300 5000
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR07
U 1 1 58B31D04
P 5000 1500
F 0 "#PWR07" H 5000 1350 50  0001 C CNN
F 1 "+5V" H 5000 1640 50  0000 C CNN
F 2 "" H 5000 1500 50  0001 C CNN
F 3 "" H 5000 1500 50  0001 C CNN
	1    5000 1500
	1    0    0    -1  
$EndComp
Text Label 1700 5100 0    60   ~ 0
RAIL_L
Text Label 1700 4700 0    60   ~ 0
RAIL_R
$Comp
L 6N136 U6
U 1 1 58ACE871
P 2800 4900
F 0 "U6" H 2600 5200 50  0000 L CNN
F 1 "6N136" H 2800 5200 50  0000 L CNN
F 2 "DIP-8" H 2600 4600 50  0000 L CIN
F 3 "" H 2800 4900 50  0000 L CNN
	1    2800 4900
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR08
U 1 1 58ACE876
P 3200 5200
F 0 "#PWR08" H 3200 4950 50  0001 C CNN
F 1 "GND" H 3200 5050 50  0000 C CNN
F 2 "" H 3200 5200 50  0000 C CNN
F 3 "" H 3200 5200 50  0000 C CNN
	1    3200 5200
	1    0    0    -1  
$EndComp
$Comp
L D D3
U 1 1 58ACE875
P 2400 4900
F 0 "D3" H 2400 5000 50  0000 C CNN
F 1 "1N4148" H 2400 4800 50  0000 C CNN
F 2 "" H 2400 4900 50  0000 C CNN
F 3 "" H 2400 4900 50  0000 C CNN
	1    2400 4900
	0    1    1    0   
$EndComp
$Comp
L R R20
U 1 1 58ACE873
P 3600 4550
F 0 "R20" V 3680 4550 50  0000 C CNN
F 1 "10k" V 3600 4550 50  0000 C CNN
F 2 "" V 3530 4550 50  0000 C CNN
F 3 "" H 3600 4550 50  0000 C CNN
	1    3600 4550
	1    0    0    -1  
$EndComp
$Comp
L R R21
U 1 1 58ACE872
P 3400 4550
F 0 "R21" V 3480 4550 50  0000 C CNN
F 1 "10k (not fitted)" V 3400 4550 50  0000 C CNN
F 2 "" V 3330 4550 50  0000 C CNN
F 3 "" H 3400 4550 50  0000 C CNN
	1    3400 4550
	1    0    0    -1  
$EndComp
$Comp
L R R19
U 1 1 58940B83
P 2150 4700
F 0 "R19" V 2230 4700 50  0000 C CNN
F 1 "1k5" V 2150 4700 50  0000 C CNN
F 2 "" V 2080 4700 50  0000 C CNN
F 3 "" H 2150 4700 50  0000 C CNN
	1    2150 4700
	0    1    1    0   
$EndComp
$Comp
L M95512-RDW6TP U2
U 1 1 58D0FC09
P 2800 3300
F 0 "U2" H 2550 3550 60  0000 C CNN
F 1 "M95512-RDW6TP" H 3250 3550 60  0000 C CNN
F 2 "" H 2800 3300 60  0001 C CNN
F 3 "" H 2800 3300 60  0001 C CNN
	1    2800 3300
	1    0    0    -1  
$EndComp
Text Label 2200 3400 0    60   ~ 0
NSS
Text Label 3400 3200 2    60   ~ 0
SCK
Text Label 3400 3400 2    60   ~ 0
MISO
Text Label 3400 3300 2    60   ~ 0
MOSI
$Comp
L +2V8 #PWR010
U 1 1 58D0FC14
P 2800 2800
F 0 "#PWR010" H 2800 2650 50  0001 C CNN
F 1 "+2V8" H 2800 2940 50  0000 C CNN
F 2 "" H 2800 2800 50  0001 C CNN
F 3 "" H 2800 2800 50  0001 C CNN
	1    2800 2800
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR011
U 1 1 58D0FC1A
P 2800 3600
F 0 "#PWR011" H 2800 3350 50  0001 C CNN
F 1 "GND" H 2800 3450 50  0000 C CNN
F 2 "" H 2800 3600 50  0001 C CNN
F 3 "" H 2800 3600 50  0001 C CNN
	1    2800 3600
	1    0    0    -1  
$EndComp
$Sheet
S 5100 1500 1300 2300
U 58AFF684
F0 "Controller" 60
F1 "controller.sch" 60
F2 "VBAT" U L 5100 1700 60 
F3 "I2C2_SDA" B R 6400 2400 60 
F4 "I2C2_SCL" O R 6400 2500 60 
F5 "USB_VBUS" U L 5100 1900 60 
F6 "USB_ID" I L 5100 2200 60 
F7 "USB_D-" B L 5100 2000 60 
F8 "USB_D+" B L 5100 2100 60 
F9 "VMOT" U L 5100 1600 60 
F10 "IR_R" I R 6400 1800 60 
F11 "IR_L" I R 6400 1900 60 
F12 "DCC_IN" I R 6400 1600 60 
F13 "JTAG_RST" I L 5100 2800 60 
F14 "BOOT0" I L 5100 3000 60 
F15 "JTAG_TDO" O L 5100 2500 60 
F16 "JTAG_TMS" I L 5100 2700 60 
F17 "JTAG_TCK" I L 5100 2600 60 
F18 "JTAG_TDI" I L 5100 2400 60 
F19 "SPI2_NSS" O R 6400 3000 60 
F20 "SPI2_MOSI" O R 6400 2800 60 
F21 "SPI2_MISO" I R 6400 2900 60 
F22 "SPI2_SCK" O R 6400 2700 60 
F23 "PWM_A" O R 6400 2100 60 
F24 "PWM_B" O R 6400 2200 60 
F25 "BOOT1" I L 5100 3100 60 
F26 "PD2" B R 6400 3600 60 
F27 "PC[0..15]" B R 6400 3500 60 
F28 "PA[0..15]" B R 6400 3300 60 
F29 "PB[0..15]" B R 6400 3400 60 
$EndSheet
Text Label 6700 2900 2    60   ~ 0
MISO
Text Label 6700 2800 2    60   ~ 0
MOSI
Text Label 6700 2700 2    60   ~ 0
SCK
Text Label 6700 3000 2    60   ~ 0
NSS
Text Label 3400 5000 2    60   ~ 0
DCC
Text Label 6700 1600 2    60   ~ 0
DCC
Entry Wire Line
	4600 2300 4700 2400
Entry Wire Line
	4600 2400 4700 2500
Entry Wire Line
	4600 2500 4700 2600
Entry Wire Line
	4600 2600 4700 2700
Entry Wire Line
	4600 2700 4700 2800
Entry Wire Line
	6800 1800 6900 1900
Entry Wire Line
	6800 1900 6900 2000
Entry Wire Line
	4600 5400 4700 5500
Entry Wire Line
	4600 5300 4700 5400
Entry Wire Line
	4600 5200 4700 5300
Entry Wire Line
	4600 5100 4700 5200
Entry Wire Line
	4600 5000 4700 5100
Entry Wire Line
	6800 4700 6900 4800
Entry Wire Line
	6800 4600 6900 4700
Text Label 6700 5500 2    60   ~ 0
MOT-
Text Label 6700 5400 2    60   ~ 0
MOT+
$Sheet
S 5100 4500 1300 1900
U 58D2BC78
F0 "Connectors" 60
F1 "connectors.sch" 60
F2 "JTAG_TMS" O L 5100 5400 60 
F3 "JTAG_TCK" O L 5100 5300 60 
F4 "JTAG_TDO" I L 5100 5200 60 
F5 "JTAG_TDI" O L 5100 5100 60 
F6 "JTAG_RST" O L 5100 5500 60 
F7 "USB_VBUS" U L 5100 4600 60 
F8 "USB_D-" B L 5100 4700 60 
F9 "USB_D+" B L 5100 4800 60 
F10 "I2C2_SCL" B R 6400 5000 60 
F11 "I2C2_SDA" B R 6400 4900 60 
F12 "IR_R" O R 6400 4600 60 
F13 "IR_L" O R 6400 4700 60 
F14 "MOT+" I R 6400 5400 60 
F15 "RAIL_R" U R 6400 5200 60 
F16 "RAIL_L" U R 6400 5300 60 
F17 "MOT-" I R 6400 5500 60 
F18 "I" O R 6400 5800 60 
F19 "USB_ID" O L 5100 4900 60 
F20 "RVRS-" I R 6400 5600 60 
F21 "FRWD-" I R 6400 5700 60 
F22 "PC[0..15]" B R 6400 6200 60 
F23 "PA[0..15]" B R 6400 6000 60 
F24 "PB[0..15]" B R 6400 6100 60 
F25 "PD2" B R 6400 6300 60 
$EndSheet
Entry Wire Line
	7000 5000 7100 5100
Entry Wire Line
	7000 4900 7100 5000
Entry Wire Line
	7000 2500 7100 2600
Entry Wire Line
	7000 2400 7100 2500
Entry Wire Line
	4400 4700 4500 4800
Entry Wire Line
	4400 4600 4500 4700
Entry Wire Line
	4400 4500 4500 4600
Entry Wire Line
	4400 1800 4500 1900
Entry Wire Line
	4400 1900 4500 2000
Entry Wire Line
	4400 2000 4500 2100
Entry Wire Line
	4400 2100 4500 2200
$Comp
L +5V #PWR018
U 1 1 58D544D7
P 5000 4500
F 0 "#PWR018" H 5000 4350 50  0001 C CNN
F 1 "+5V" H 5000 4640 50  0000 C CNN
F 2 "" H 5000 4500 50  0001 C CNN
F 3 "" H 5000 4500 50  0001 C CNN
	1    5000 4500
	1    0    0    -1  
$EndComp
Text Label 9600 2100 2    60   ~ 0
MOT+
Text Label 9600 2200 2    60   ~ 0
MOT-
$Sheet
S 8400 2000 900  300 
U 58B20AEF
F0 "Drivetrain" 60
F1 "drivetrain.sch" 60
F2 "MOT-" O R 9300 2200 60 
F3 "MOT+" O R 9300 2100 60 
F4 "PWM_A" I L 8400 2100 60 
F5 "PWM_B" I L 8400 2200 60 
$EndSheet
Entry Wire Line
	4400 4800 4500 4900
$Comp
L +3.3V #PWR09
U 1 1 58940D69
P 3400 4200
F 0 "#PWR09" H 3400 4050 50  0001 C CNN
F 1 "+3.3V" H 3400 4340 50  0000 C CNN
F 2 "" H 3400 4200 50  0000 C CNN
F 3 "" H 3400 4200 50  0000 C CNN
	1    3400 4200
	1    0    0    -1  
$EndComp
Wire Bus Line
	4600 2300 4600 5400
Wire Bus Line
	6900 1900 6900 4800
Connection ~ 5000 1900
Wire Wire Line
	4500 2000 5100 2000
Wire Wire Line
	4500 2100 5100 2100
Wire Wire Line
	4700 2800 5100 2800
Wire Wire Line
	4700 2700 5100 2700
Wire Wire Line
	4700 2600 5100 2600
Wire Wire Line
	4700 2500 5100 2500
Wire Wire Line
	4700 2400 5100 2400
Wire Wire Line
	6400 1900 6800 1900
Wire Wire Line
	6400 1800 6800 1800
Wire Wire Line
	6400 1600 6700 1600
Wire Wire Line
	6400 2500 7000 2500
Wire Wire Line
	6400 2400 7000 2400
Wire Wire Line
	6400 3000 6700 3000
Wire Wire Line
	6400 2900 6700 2900
Wire Wire Line
	6400 2800 6700 2800
Wire Wire Line
	6400 2700 6700 2700
Wire Wire Line
	5000 1900 5000 1500
Wire Wire Line
	4500 1900 5100 1900
Wire Wire Line
	2400 3400 2200 3400
Wire Wire Line
	3200 3200 3400 3200
Wire Wire Line
	3200 3300 3400 3300
Wire Wire Line
	3200 3400 3400 3400
Wire Wire Line
	2400 3200 2300 3200
Wire Wire Line
	2400 3300 2100 3300
Wire Wire Line
	2800 2800 2800 3000
Connection ~ 2800 2900
Wire Wire Line
	3100 4800 3400 4800
Wire Wire Line
	3400 4800 3400 4700
Wire Wire Line
	3100 5100 3200 5100
Wire Wire Line
	3200 5100 3200 5200
Wire Wire Line
	3100 5000 3600 5000
Wire Wire Line
	3600 5000 3600 4700
Wire Wire Line
	3600 4300 3600 4400
Wire Wire Line
	3200 4300 3600 4300
Wire Wire Line
	3400 4200 3400 4400
Wire Wire Line
	3200 4300 3200 4700
Wire Wire Line
	3200 4700 3100 4700
Connection ~ 3400 4300
Wire Wire Line
	2500 4700 2500 4800
Wire Wire Line
	2300 4700 2500 4700
Wire Wire Line
	2400 4750 2400 4700
Connection ~ 2400 4700
Wire Wire Line
	2000 4700 1700 4700
Wire Wire Line
	2500 5100 2500 5000
Wire Wire Line
	1700 5100 2500 5100
Wire Wire Line
	2400 5050 2400 5100
Connection ~ 2400 5100
Wire Wire Line
	9600 5200 9600 5000
Wire Wire Line
	9300 5200 9600 5200
Wire Wire Line
	9400 5100 9400 5000
Wire Wire Line
	9300 5100 9400 5100
Wire Wire Line
	6400 5400 6700 5400
Wire Wire Line
	6400 5500 6700 5500
Wire Wire Line
	8400 5100 8300 5100
Wire Wire Line
	8300 5100 8300 5000
Wire Bus Line
	7100 2500 7100 5100
Wire Wire Line
	4500 2200 5100 2200
Wire Bus Line
	4400 1800 4400 4800
Wire Wire Line
	4700 5100 5100 5100
Wire Wire Line
	4700 5200 5100 5200
Wire Wire Line
	4700 5300 5100 5300
Wire Wire Line
	5100 5400 4700 5400
Wire Wire Line
	4700 5500 5100 5500
Wire Wire Line
	4500 4800 5100 4800
Wire Wire Line
	4500 4700 5100 4700
Wire Wire Line
	4500 4600 5100 4600
Wire Wire Line
	5000 4600 5000 4500
Connection ~ 5000 4600
Wire Wire Line
	6400 2200 8400 2200
Wire Wire Line
	6400 2100 8400 2100
Wire Wire Line
	9300 2100 9600 2100
Wire Wire Line
	9300 2200 9600 2200
Wire Wire Line
	4500 4900 5100 4900
Wire Wire Line
	6800 4600 6400 4600
Wire Wire Line
	6400 4700 6800 4700
Wire Wire Line
	7000 4900 6400 4900
Wire Wire Line
	6400 5000 7000 5000
Wire Wire Line
	6400 5200 8400 5200
Wire Wire Line
	8400 5300 6400 5300
$Sheet
S 8400 5000 900  400 
U 58B005B6
F0 "Power" 60
F1 "power.sch" 60
F2 "RAIL_R" I L 8400 5200 60 
F3 "RAIL_L" I L 8400 5300 60 
F4 "2V8" O R 9300 5200 60 
F5 "VCC" O R 9300 5100 60 
F6 "5V" I L 8400 5100 60 
$EndSheet
Text Label 6700 2400 2    60   ~ 0
SDA
Text Label 6700 4900 2    60   ~ 0
SDA
Text Label 6700 2500 2    60   ~ 0
SCL
Text Label 6700 5000 2    60   ~ 0
SCL
Text Label 6700 4600 2    60   ~ 0
IR_R
Text Label 6700 4700 2    60   ~ 0
IR_L
Text Label 6700 1800 2    60   ~ 0
IR_R
Text Label 6700 1900 2    60   ~ 0
IR_L
Wire Wire Line
	2100 3300 2100 3150
Wire Wire Line
	2100 2900 2800 2900
Connection ~ 2300 2900
$Comp
L R_Small R10
U 1 1 58D3BFC4
P 2100 3050
F 0 "R10" H 2130 3070 50  0000 L CNN
F 1 "10k" H 2130 3010 50  0000 L CNN
F 2 "" H 2100 3050 50  0001 C CNN
F 3 "" H 2100 3050 50  0001 C CNN
	1    2100 3050
	1    0    0    -1  
$EndComp
$Comp
L R_Small R11
U 1 1 58D3C27D
P 2300 3050
F 0 "R11" H 2330 3070 50  0000 L CNN
F 1 "10k" H 2330 3010 50  0000 L CNN
F 2 "" H 2300 3050 50  0001 C CNN
F 3 "" H 2300 3050 50  0001 C CNN
	1    2300 3050
	1    0    0    -1  
$EndComp
Wire Wire Line
	2300 2900 2300 2950
Wire Wire Line
	2100 2900 2100 2950
Wire Wire Line
	2300 3200 2300 3150
Wire Bus Line
	6400 3300 7300 3300
Wire Bus Line
	7300 3300 7300 6000
Wire Bus Line
	7300 6000 6400 6000
Wire Bus Line
	6400 3400 7500 3400
Wire Bus Line
	7500 3400 7500 6100
Wire Bus Line
	7500 6100 6400 6100
Wire Bus Line
	6400 3500 7700 3500
Wire Bus Line
	7700 3500 7700 6200
Wire Bus Line
	7700 6200 6400 6200
Text Label 6700 5200 2    60   ~ 0
RAIL_R
Text Label 6700 5300 2    60   ~ 0
RAIL_L
Text Label 6700 2100 2    60   ~ 0
PWM_A
Text Label 6700 2200 2    60   ~ 0
PWM_B
Wire Wire Line
	6400 3600 7900 3600
Wire Wire Line
	7900 3600 7900 6300
Wire Wire Line
	7900 6300 6400 6300
$EndSCHEMATC
